<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.2"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>UART Lab 6: CS_UART_Lab6/src/Source Files/i2c.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">UART Lab 6<span id="projectnumber">&#160;1.0</span>
   </div>
   <div id="projectbrief">Cyrus Sowdaey</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('i2c_8c.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">i2c.c File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>i2c setup file Responsible for setup of i2c communication and state machine logic  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;i2c.h&quot;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a3d74e3a730c761f8adad646b4c696df6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a3d74e3a730c761f8adad646b4c696df6">i2c_bus_reset</a> (I2C_TypeDef *i2c)</td></tr>
<tr class="memdesc:a3d74e3a730c761f8adad646b4c696df6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs a reset on the i2c bus.  <a href="i2c_8c.html#a3d74e3a730c761f8adad646b4c696df6">More...</a><br /></td></tr>
<tr class="separator:a3d74e3a730c761f8adad646b4c696df6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2ced9f3cdcb34d9d3f0b397f70c32fc"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aa2ced9f3cdcb34d9d3f0b397f70c32fc">i2c_ack_sm</a> (<a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a> *i2c_ackSM)</td></tr>
<tr class="memdesc:aa2ced9f3cdcb34d9d3f0b397f70c32fc"><td class="mdescLeft">&#160;</td><td class="mdescRight">ACK interrupt state machine. Handles ACK interrupts.  <a href="i2c_8c.html#aa2ced9f3cdcb34d9d3f0b397f70c32fc">More...</a><br /></td></tr>
<tr class="separator:aa2ced9f3cdcb34d9d3f0b397f70c32fc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1b27634bd1e5a8168bc161497bb75396"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a1b27634bd1e5a8168bc161497bb75396">i2c_receive_sm</a> (<a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a> *i2c_ackSM)</td></tr>
<tr class="memdesc:a1b27634bd1e5a8168bc161497bb75396"><td class="mdescLeft">&#160;</td><td class="mdescRight">RXDATAV interrupt state machine. Handles RXDATAV interrupts.  <a href="i2c_8c.html#a1b27634bd1e5a8168bc161497bb75396">More...</a><br /></td></tr>
<tr class="separator:a1b27634bd1e5a8168bc161497bb75396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a225c8ce313ce9f0ee31d69a06f29a0f6"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a225c8ce313ce9f0ee31d69a06f29a0f6">i2c_msstop_sm</a> (<a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a> *i2c_ackSM)</td></tr>
<tr class="memdesc:a225c8ce313ce9f0ee31d69a06f29a0f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">MSTOP interrupt state machine. Handles MSTOP interrupts.  <a href="i2c_8c.html#a225c8ce313ce9f0ee31d69a06f29a0f6">More...</a><br /></td></tr>
<tr class="separator:a225c8ce313ce9f0ee31d69a06f29a0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37e52476b42e22d83c0670841ed89e90"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a37e52476b42e22d83c0670841ed89e90">i2c_open</a> (I2C_TypeDef *address, <a class="el" href="struct_i2_c___o_p_e_n___s_t_r_u_c_t.html">I2C_OPEN_STRUCT</a> *i2c_setup)</td></tr>
<tr class="memdesc:a37e52476b42e22d83c0670841ed89e90"><td class="mdescLeft">&#160;</td><td class="mdescRight">Configures and sets up I2C communication and peripherals.  <a href="i2c_8c.html#a37e52476b42e22d83c0670841ed89e90">More...</a><br /></td></tr>
<tr class="separator:a37e52476b42e22d83c0670841ed89e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae772ca9ccdd66fe017ccf6abc060ec74"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ae772ca9ccdd66fe017ccf6abc060ec74">i2c_start</a> (I2C_TypeDef *i2c, uint32_t dev_address, uint32_t mode, uint32_t *data, uint32_t bytes_per_transfer, uint32_t reg_address, uint32_t callback)</td></tr>
<tr class="memdesc:ae772ca9ccdd66fe017ccf6abc060ec74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Performs either a read or a write operation through i2c.  <a href="i2c_8c.html#ae772ca9ccdd66fe017ccf6abc060ec74">More...</a><br /></td></tr>
<tr class="separator:ae772ca9ccdd66fe017ccf6abc060ec74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e817e99d2a59e5f48e4ff0c79e7eef5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#a8e817e99d2a59e5f48e4ff0c79e7eef5">I2C0_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:a8e817e99d2a59e5f48e4ff0c79e7eef5"><td class="mdescLeft">&#160;</td><td class="mdescRight">IRQhandler for I2C0 interrupt peripheral.  <a href="i2c_8c.html#a8e817e99d2a59e5f48e4ff0c79e7eef5">More...</a><br /></td></tr>
<tr class="separator:a8e817e99d2a59e5f48e4ff0c79e7eef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac45e5675f6f4e6e1dee2273baf245219"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#ac45e5675f6f4e6e1dee2273baf245219">I2C1_IRQHandler</a> (void)</td></tr>
<tr class="memdesc:ac45e5675f6f4e6e1dee2273baf245219"><td class="mdescLeft">&#160;</td><td class="mdescRight">IRQhandler for I2C1 interrupt peripheral.  <a href="i2c_8c.html#ac45e5675f6f4e6e1dee2273baf245219">More...</a><br /></td></tr>
<tr class="separator:ac45e5675f6f4e6e1dee2273baf245219"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff6f2b2b6909c9abefa9e3d2718fc5cd"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="i2c_8c.html#aff6f2b2b6909c9abefa9e3d2718fc5cd">busy_state</a> (I2C_TypeDef *i2c)</td></tr>
<tr class="memdesc:aff6f2b2b6909c9abefa9e3d2718fc5cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Checks busy state of i2c peripheral.  <a href="i2c_8c.html#aff6f2b2b6909c9abefa9e3d2718fc5cd">More...</a><br /></td></tr>
<tr class="separator:aff6f2b2b6909c9abefa9e3d2718fc5cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ae5278be6da6ffa9558fef780219f03ca"><td class="memItemLeft" align="right" valign="top"><a id="ae5278be6da6ffa9558fef780219f03ca" name="ae5278be6da6ffa9558fef780219f03ca"></a>
static <a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i2c0_statemachine_vars</b></td></tr>
<tr class="separator:ae5278be6da6ffa9558fef780219f03ca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d8d2cb46790d68b290620805b9f0414"><td class="memItemLeft" align="right" valign="top"><a id="a4d8d2cb46790d68b290620805b9f0414" name="a4d8d2cb46790d68b290620805b9f0414"></a>
static <a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a>&#160;</td><td class="memItemRight" valign="bottom"><b>i2c1_statemachine_vars</b></td></tr>
<tr class="separator:a4d8d2cb46790d68b290620805b9f0414"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p >i2c setup file Responsible for setup of i2c communication and state machine logic </p>
<dl class="section author"><dt>Author</dt><dd>Cyrus Sowdaey </dd></dl>
<dl class="section date"><dt>Date</dt><dd>10/17/2021 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="aff6f2b2b6909c9abefa9e3d2718fc5cd" name="aff6f2b2b6909c9abefa9e3d2718fc5cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aff6f2b2b6909c9abefa9e3d2718fc5cd">&#9670;&nbsp;</a></span>busy_state()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool busy_state </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Checks busy state of i2c peripheral. </p>
<p >Determines if i2c periph is available based on input of I2C_Typedef *i2c</p>
<dl class="section note"><dt>Note</dt><dd>Verifies availability of i2c </dd></dl>

</div>
</div>
<a id="a8e817e99d2a59e5f48e4ff0c79e7eef5" name="a8e817e99d2a59e5f48e4ff0c79e7eef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e817e99d2a59e5f48e4ff0c79e7eef5">&#9670;&nbsp;</a></span>I2C0_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C0_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IRQhandler for I2C0 interrupt peripheral. </p>
<p >Handles any interrupts triggered by the I2C0 peripheral. Based on which flags have been raised, will perform proper operations in response. </p><dl class="section note"><dt>Note</dt><dd>Handles ACK, RXDATAV, and MSTOP interrupt flags. </dd></dl>

</div>
</div>
<a id="ac45e5675f6f4e6e1dee2273baf245219" name="ac45e5675f6f4e6e1dee2273baf245219"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac45e5675f6f4e6e1dee2273baf245219">&#9670;&nbsp;</a></span>I2C1_IRQHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void I2C1_IRQHandler </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>IRQhandler for I2C1 interrupt peripheral. </p>
<p >Handles any interrupts triggered by the I2C1 peripheral. Based on which flags have been raised, will perform proper operations in response.</p>
<dl class="section note"><dt>Note</dt><dd>Handles ACK, RXDATAV, and MSTOP interrupt flags. </dd></dl>

</div>
</div>
<a id="aa2ced9f3cdcb34d9d3f0b397f70c32fc" name="aa2ced9f3cdcb34d9d3f0b397f70c32fc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2ced9f3cdcb34d9d3f0b397f70c32fc">&#9670;&nbsp;</a></span>i2c_ack_sm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void i2c_ack_sm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a> *&#160;</td>
          <td class="paramname"><em>i2c_ackSM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ACK interrupt state machine. Handles ACK interrupts. </p>
<p >Function is called by i2c IRQ handler when ACK flag is triggered. Upon receiving ACK interrupt: does one of two options depending on the possible cases. init_write will cause the peripheral to initialize a specified register for data to be sent to. write_data will read data from the device and write it to specified register. It will continually go through cases after the previous is completed.</p>
<dl class="section note"><dt>Note</dt><dd>This function should only do one of two things, other cases should not necessarily occur and as such, the default case has an EFM_ASSERT(false)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_ackSM</td><td>Input state machine structure whose variables are to be checked. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a3d74e3a730c761f8adad646b4c696df6" name="a3d74e3a730c761f8adad646b4c696df6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3d74e3a730c761f8adad646b4c696df6">&#9670;&nbsp;</a></span>i2c_bus_reset()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void i2c_bus_reset </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Performs a reset on the i2c bus. </p>
<p >Aborts current state of i2c bus, then clears interrupt flags. Clears both astop and start bits to reset all conditions. </p><dl class="section note"><dt>Note</dt><dd>Called in <a class="el" href="app_8c.html" title="File responsible for functions to run all previously defined scheduling, energy mode,...">app.c</a> in order to configure i2c and clear any previous conditions, performing a clean reset. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c</td><td>Pointer to desired i2c peripheral whose bus is to be reset. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a225c8ce313ce9f0ee31d69a06f29a0f6" name="a225c8ce313ce9f0ee31d69a06f29a0f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a225c8ce313ce9f0ee31d69a06f29a0f6">&#9670;&nbsp;</a></span>i2c_msstop_sm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void i2c_msstop_sm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a> *&#160;</td>
          <td class="paramname"><em>i2c_ackSM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>MSTOP interrupt state machine. Handles MSTOP interrupts. </p>
<p >This function is only called by the IRQ handler observing an MSTOP interrupt flag being raised. Upon observing a stop condition has been sent, and thus i2c communication is done, energy modes can be changed. Schedules an event to send data, as the i2c_callback.</p>
<dl class="section note"><dt>Note</dt><dd>Current state must be in receive_data, as an MSTOP condition cannot occur outside of this (or at least should not)</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_ackSM</td><td>Input state machine structure whose variables are to be checked. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a37e52476b42e22d83c0670841ed89e90" name="a37e52476b42e22d83c0670841ed89e90"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a37e52476b42e22d83c0670841ed89e90">&#9670;&nbsp;</a></span>i2c_open()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_open </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_i2_c___o_p_e_n___s_t_r_u_c_t.html">I2C_OPEN_STRUCT</a> *&#160;</td>
          <td class="paramname"><em>i2c_setup</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Configures and sets up I2C communication and peripherals. </p>
<p >Configures peripheral clocks for either I2C0 or I2C1. Additionally, routes i2c peripherals and enables correct interrupts.</p>
<dl class="section note"><dt>Note</dt><dd>Configuration function, called in <a class="el" href="app_8c.html" title="File responsible for functions to run all previously defined scheduling, energy mode,...">app.c</a> in order to setup i2c operation.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>Address of i2c peripheral to be configured.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_setup</td><td>Contains info for CLHR ratio, freq, master bit, ref bit, and enable. Additionally has routing locations. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a1b27634bd1e5a8168bc161497bb75396" name="a1b27634bd1e5a8168bc161497bb75396"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1b27634bd1e5a8168bc161497bb75396">&#9670;&nbsp;</a></span>i2c_receive_sm()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void i2c_receive_sm </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_i2_c___s_t_a_t_e___m_a_c_h_i_n_e.html">I2C_STATE_MACHINE</a> *&#160;</td>
          <td class="paramname"><em>i2c_ackSM</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>RXDATAV interrupt state machine. Handles RXDATAV interrupts. </p>
<p >Similarly to <a class="el" href="i2c_8c.html#aa2ced9f3cdcb34d9d3f0b397f70c32fc" title="ACK interrupt state machine. Handles ACK interrupts.">i2c_ack_sm()</a>, this function is only called when the RXDATAV flag is raised and handled by an IRQhandler. Depending on if more data than expected is sent by the peripheral, state machine will perform different operations. Will continually loop until correct number of bytes are read, as sent by peripheral. Will send a stop and NACK if successful, and will increment state machine.</p>
<dl class="section note"><dt>Note</dt><dd>This function should continually loop and increment depending on state of read operations from the peripheral.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c_ackSM</td><td>Input state machine structure whose variables are to be checked. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae772ca9ccdd66fe017ccf6abc060ec74" name="ae772ca9ccdd66fe017ccf6abc060ec74"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae772ca9ccdd66fe017ccf6abc060ec74">&#9670;&nbsp;</a></span>i2c_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void i2c_start </td>
          <td>(</td>
          <td class="paramtype">I2C_TypeDef *&#160;</td>
          <td class="paramname"><em>i2c</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>dev_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>bytes_per_transfer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>reg_address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>callback</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Performs either a read or a write operation through i2c. </p>
<p >Depending on input arguments, will configure I2C0 or I2C1 interrupts and peripheral.</p>
<dl class="section note"><dt>Note</dt><dd>Reads or writes to a peripheral based on inputs.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">i2c</td><td>Pointer to i2c peripheral that is being interacted with</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">dev_address</td><td>Address of the peripheral being communicated with master device.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">mode</td><td>Write or Read mode, determines actions of i2c_start</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>Pointer to data which will either be data read from, or data sent to peripheral.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">bytes_per_transfer</td><td>Expected amount of bytes to be transferred per operation.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">reg_address</td><td>Address of peripheral whose data will be read from, or written to that register.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">callback</td><td>Callback to perform upon completing data transfer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_05c40bd657b8e97bbf7d1820fa542e7e.html">CS_UART_Lab6</a></li><li class="navelem"><a class="el" href="dir_ae11013cc30ffe0a9763ef20c485c26f.html">src</a></li><li class="navelem"><a class="el" href="dir_30055f7427f3dcef18e33d02ffff6b2e.html">Source Files</a></li><li class="navelem"><a class="el" href="i2c_8c.html">i2c.c</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.2 </li>
  </ul>
</div>
</body>
</html>
